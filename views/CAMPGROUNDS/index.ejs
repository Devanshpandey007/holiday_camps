<% layout('../layouts/boilerplate') %>

<div class="main-map" id="map" style="width: 100%; height: 500px; padding: 0; margin: 10px 0"></div>
<div class="main-body">
    <h1 class="mb-4 mt-2" style="text-align: center; margin-bottom: 10px; font-size: 26px; opacity: 0.8;">List of all available Campgrounds</h1>
    <section class="container m-0 p-0">
        <% for (let cg of campgrounds.features) { %>
            <div class="card mb-2">
                <div class="row g-0">
                    <div class="col-md-4">
                      <% if (cg.properties.images && cg.properties.images.length > 0) {%>
                        <img crossorigin="anonymous" class="img-fluid cover-img" src="<%= cg.properties.images[0].file_path %>" alt="oops!">
                      <% } else {%>
                        <img crossorigin="anonymous" class="img-fluid cover-img" src="https://via.placeholder.com/300" alt="oops!">
                      <% } %>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body p-2">
                            <h5 class="card-title" style="font-size: 20px; margin-bottom: 5px;"><%= cg.properties.title %></h5>
                            <p class="card-text" style="font-size: 16px; margin-bottom: 5px;"><%= cg.properties.description %></p>
                            <p class="card-text" style="font-size: 14px; margin-bottom: 5px;">
                                <small class="text-muted"><%= cg.properties.location %></small>
                            </p>
                            <a href="/campgrounds/<%= cg.properties.id %>" class="btn btn-primary btn-sm">View campground</a>
                        </div>
                    </div>
                </div>
            </div>
        <% } %>
    </section>

<script>
    const mapKey = "<%- process.env.MAP_KEY %>";
    const geojsonCampgrounds = <%- JSON.stringify(campgrounds) %>; 
</script>

<script src="/javascript/clusterMap.js"></script>
